{% extends "ProyectoWebApp/base.html" %}

{% load static %}

{% block content %}


<div class="text-center con">
    <button id="loadProductsButton">Mostrar Productos</button>
<div id="productList" class="text-center">

</div>
</div>


<script>
    // Obtener referencia al botón
    const loadProductsButton = document.getElementById('loadProductsButton');

    // Agregar evento click al botón
    loadProductsButton.addEventListener('click', () => {
      // Carga del archivo JSON
      fetch('/static/ProyectoWebApp/productos.json')
        .then(response => response.json())
        .then(data => {
          const productListElement = document.getElementById('productList');
          const productos = data.productos;

          // Limpiar el contenido previo del listado
          productListElement.innerHTML = '';

          // Recorrer los productos y crear las tarjetas
          productos.forEach(producto => {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';

            const title = document.createElement('h3');
            title.textContent = producto.title;

            const artist = document.createElement('p');
            artist.textContent = 'Artista: ' + producto.artist;

            const price = document.createElement('p');
            price.textContent = 'Precio: ' + producto.price;

            const image = document.createElement('img');
            image.className = 'product-image';
            image.src = "{% static 'ProyectoWebApp/img/bateria.jpg' %}";
            image.alt = producto.title;

            productCard.appendChild(title);
            productCard.appendChild(artist);
            productCard.appendChild(price);
            productCard.appendChild(image);

            productListElement.appendChild(productCard);
          });
        })
        .catch(error => console.error(error));
    });
  </script>
{% endblock %}